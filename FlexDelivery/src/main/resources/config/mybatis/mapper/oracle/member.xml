<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="config.mybatis.mapper.oracle.member">
	
	<insert id="insertMember" parameterType="memberVo">
		<selectKey keyProperty="memberNo" resultType="int" order="BEFORE">
			select member_seq.nextval from dual
		</selectKey>
		insert into member(member_No, member_Name, member_Id, member_Pwd, member_Zipcode,member_Address,
			member_Address_Detail,member_Hp1,member_Hp2, member_Hp3,member_Email1, member_Email2) 
		values(#{memberNo}, #{memberName}, #{namemberIdme}, #{memberPwd}, #{memberZipcode}, #{memberAdress},
			#{memberAdressDetail},#{memberHp1},#{memberHp2}, #{memberHp3},#{memberEmail1}, #{memberEmail2})
	</insert>

	<select id="selectPwd" parameterType="String" resultType="String">
		select member_Pwd from member where member_Id=#{userid} and member_Outdate is null
	</select>
	
	<select id="selectMember" parameterType="String" resultType="memberVo">
		select * from member where member_id=#{userid}
	</select>
	
	<select id="selectMemberId" parameterType="memberVo" resultType="string">
		select member_Id from member where member_email1=#{memberEmail1} and member_email2=#{memberEmail2}
			and member_Name=#{memberName} and member_Outdate is null
	</select>
			
	<select id="chkMember" parameterType="memberVo" resultType="int">
		select count(*) from member where member_email1=#{memberEmail1} and member_email2=#{memberEmail2} and member_id=#{memberId}
		and member_Outdate is null
	</select>
	
	<update id="pwdUpd" parameterType="memberVo">
		update member
		set member_pwd=#{memberPwd}
		where member_id=#{memberId}
	</update>
	
	<select id="selectAuth" resultType="string" parameterType="int">
		select authority_name from authority where authority_no=#{authorityNo}
	</select>
</mapper>
