<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="config.mybatis.mapper.oracle.ownerlaunch">
<!-- 유효성검사해야하나? 관리자가 알아서 반려해줬으면^^.... -->
	<select id="dupckRegiNo" parameterType="int">
	select count(*) from OWNERREGISTER
	where O_REGISTER_NO='#{oRegisterNo}
	</select>

	<insert id="insertRegister" parameterType="ownerRegisterVo" >
		insert into ownerregister(O_REGISTER_NO,O_REGISTER_FILENAME, O_REGISTER_ORIGINAL_FILENAME)
		values(#{oRegisterNo}, #{oRegisterFileName},#{oRegisterOriginalFileName})
	</insert>
	
	<!-- 유저 번호 같은거만 뜨니까 일치한지 안해도되겠지 ??  -->
	<delete id="deleteRegi">
	delete from OWNERREGISTER
		where O_REGISTER_NO=#{oRegisterNo}
	</delete>
	
	<!-- 승인 목록 조회 
create or replace view LSJAgreeListView
as
select s.STORE_NO,s.A_AGREE_NO as SAGREENO,s.STORE_REGDATE,
o.O_REGISTER_NO,o.A_AGREE_NO as RAGREENO, o.owner_no, o.OWNERREGISTER_REGDATE,
a.STOREAD_NO, a.ad_pay_flag, a.STOREAD_REGDATE
from ownerRegister o full outer join stores s
on  o.OWNER_NO=s.OWNER_NO
 full join STOREAD a
on a.store_no=s.STORE_NO;
	 -->
	
		<select id="selectLSJAgreeListView" parameterType="int"
		resultType="map">
		select * from LSJAgreeListView
		where OWNER_NO=#{ownerNo}
	</select>
	
	<delete id="deleteAd" parameterType="int">
		delete from STOREAD
		where STOREAD_NO=#{storeadNo}
	</delete>
	
	
</mapper>
